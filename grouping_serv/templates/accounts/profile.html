{% extends 'base.html' %}

{% block title %}home{% endblock %}
{% block content %}



{% with own=created %}
{% if user.is_authenticated %}

{% if own %}
<h2>
{{classid}}
</h2>
<div><a class = "link" href = {{"/accounts/edit/"|add:classid}}>Edit permissions</a></div>
</form>
<p>Combination grouping algorithm</p>
<form action = {{"/accounts/compute/"|add:classid|add:"/"}} method="post">
  {% csrf_token %}
    <a>Group size: </a>
    <div><input id="size" type="text" name="size" style ="width:100px;"></div>
  <input type="submit" value="compute">
</form>


{% else %}
<h2>
{{user.username}}'s profile in {{classid}}
</h2>

{% with profile=user.profile %}
<table style="width:50">
<tr style="background-color: rgb(100, 255, 100);">
  <th class = "table_element"> favored: </th>

{% with c=classid %}
{% for f in favored %}
  {% if f.0 == c %}
  {% for inner in f.1 %}
    <td class = "table_element"><div>{{inner}}</div> </td>
  {% endfor %}
  {% endif %}
{% endfor %}
{% endwith %}
</tr>

<tr style="background-color: rgb(255, 100, 100);">
<th class = "table_element"> disliked: </th>
{% with c=classid %}
{% for f in disliked %}
  {% if f.0 == c %}
  {% for inner in f.1 %}
    <td class = "table_element"><div>{{inner}}</div> </td>
  {% endfor %}
  {% endif %}
{% endfor %}
{% endwith %}
</table>
{% endwith %}
<div style = "padding: 10px 2px"><a href="/accounts/list" class = "link">available usernames</a></div>
<h3>Add data</h3>
<form action = "" method="post">
  {% csrf_token %}
  {{ form }}
  <p>Favored</p>
  <input id="favored" type="text" name="favored">
  <p>Disliked</p>
  <input id="disliked" type="text" name="disliked">
  <input type="submit" value="OK">
</form>
<h3>Remove data</h3>
<form action = "" method="post">
  {% csrf_token %}
  {{ form }}
  <p>Favored</p>
  <input id="rm_favored" type="text" name="rm_favored">
  <p>Disliked</p>
  <input id="rm_disliked" type="text" name="rm_disliked">
  <input type="submit" value="OK">
{% endif %}
{% endif %}
{% endwith %}

{% endblock %}
