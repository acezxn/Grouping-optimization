<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

{% load i18n %}

<div class="navbar">
  {% load static %}
  <a href="/" style="background-color: rgb(7, 32, 0);" class="logo"><img style="width: 4.5vw;height:auto;padding: 0px 0px;max-width:20px;" src="{% static 'logos/iplusi.png' %}"></a>
  {% if url == "home" %}
  <a class="username" href="/">{%trans "Home" %}</a>
  {% else %}
  <a href="/">{%trans "Home"%}</a>
  {% endif %}
  {% if url == "about" %}
  <a class="username" href="/about">{%trans "About" %}</a>
  {% else %}
  <a href="/about">{%trans "About" %}</a>
  {% endif %}

  {% if user.is_authenticated %}
  {% if url == "accounts" %}
  <a class="username" href="/accounts/profile">{{user.username}}</a>
  {% else %}
  <a href="/accounts/profile">{{user.username}}</a>
  {% endif %}
  <a href="/accounts/logout">{%trans "Logout" %}</a>
  {% else %}
  <a href="/accounts/login">{%trans "Login" %}</a>
  {% if url == "signup" %}
  <a class="username" href="/accounts/signup">{%trans "Sign up" %}</a>
  {% else %}
  <a href="/accounts/signup">{%trans "Sign up" %}</a>
  {% endif %}
  {% endif %}
</div>
{% get_current_language as LANGUAGE_CODE %}
{% get_language_info for LANGUAGE_CODE as lang %}
<style>
.dropbtn {
background-color: rgb(1, 79, 0);
color: white;
padding: 16px;
font-size: 16px;
border: none;
cursor: pointer;
width: min(30vw, 130px);
}

.dropdown {
position: relative;
display: inline-block;
width: min(30vw, 130px);
}

.dropdown-content {
display: none;
position: absolute;
background-color: #f9f9f9;
min-width: min(30vw, 130px);
box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
z-index: 1;
}

.dropdown:hover .dropdown-content {
display: block;
}

.dropdown:hover .dropbtn {
background-color: rgb(1, 79, 0);
}
</style>


<div class="dropdown" style = "float:right;">
<button class="dropbtn">{{lang.name_local}} ({{lang.code}})</button>
<div class="dropdown-content">
  {% get_available_languages as LANGUAGES %}
  {% get_language_info_list for LANGUAGES as languages %}
  <form action="{% url 'set_language' %}" method="post" id="lang_form">{% csrf_token %}
    {% with len=LANGUAGE_CODE|length|add:1 %}
    {% if len == 8 %}
    <input name="next" type="hidden" value="{{ request.get_full_path|slice:'8:' }}" />
    {% else %}
    <input name="next" type="hidden" value="{{ request.get_full_path|slice:'3:' }}" />
    {% endif %}
    <select name="language" class="form-control" onchange="this.form.submit()"
    style="
    background-color: rgb(50 50 50);
    color: white;
    width: min(30vw, 130px);
    text-align: center;
">
      {% for language in languages %}

      <option value="{{ language.code }}"
          {% if language.code == LANGUAGE_CODE %}selected="selected"{% endif %}>
          {{language.name_translated}}
      </option>

      {% endfor %}
      </select>
    {% endwith %}
</form>
</div>
</div>
